{% extends "base.html" %}
{% block title %}Video Search{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4 hero-title" style="font-size: 2.5rem;">Search Videos</h1>
    <form method="POST" class="quick-save-form mb-5">
        <div class="url-input-group">
            <input type="text" name="keyword" class="url-input" placeholder="Search YouTube..." value="{{ keyword }}">
            <button type="submit" class="save-btn"><i class="fas fa-search"></i> Search</button>
        </div>
    </form>

    <!-- Video Results -->
    {% if videos %}
    <form action="{{ url_for('save_videos') }}" method="post">
        <div class="mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Results</h2>
                <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Save Selected</button>
            </div>

            <div class="video-grid">
                {% for video in videos %}
                <div class="video-card">
                    <div class="video-thumbnail">
                        <iframe src="https://www.youtube.com/embed/{{ video.url.split('=')[1] }}" frameborder="0"
                            allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                        </iframe>
                    </div>
                    <div class="video-info">
                        <h5 class="video-title">{{ video.title }}</h5>
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" name="video_ids[]" value="{{ loop.index }}"
                                id="check_{{ loop.index }}">
                            <label class="form-check-label text-secondary" for="check_{{ loop.index }}">
                                Select to Save
                            </label>
                        </div>
                        <input type="hidden" name="title_{{ loop.index }}" value="{{ video.title }}">
                        <input type="hidden" name="url_{{ loop.index }}" value="{{ video.url }}">
                        <input type="hidden" name="description_{{ loop.index }}" value="{{ video.description }}">
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </form>
    {% endif %}
</div>
{% endblock %}